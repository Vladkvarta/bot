Руководство: Перенос системы с SD-карты на eMMCЭтот гайд поможет вам безопасно клонировать вашу текущую систему Armbian со всеми настройками и файлами с SD-карты на внутреннюю eMMC-память.Шаг 1: ПодготовкаПрежде чем начать, убедитесь, что у вас всё готово.Физическое подключение: Установите ваш eMMC-модуль на Orange Pi.Загрузка системы: Включите Orange Pi. На этом этапе он должен, как и раньше, загрузиться с вашей SD-карты.Подключение по SSH: Подключитесь к вашему Orange Pi по SSH, как вы делаете это обычно.Шаг 2: Создание резервной копии (Важно!)Несмотря на то, что процесс клонирования обычно проходит гладко, всегда есть риск сбоя. Давайте сделаем резервную копию самого важного — папки вашего проекта.Действие: Находясь на Orange Pi, создайте архив вашей папки telegram-app:cd ~
tar -czvf telegram-app-backup.tar.gz telegram-app
Эта команда создаст файл telegram-app-backup.tar.gz в вашей домашней директории.Действие (Опционально, но рекомендуется): Скачайте этот архив на ваш локальный компьютер с помощью scp или SFTP-клиента (FileZilla, WinSCP).Шаг 3: Клонирование системы на eMMCМы будем использовать стандартную утилиту Armbian nand-sata-install, которая специально предназначена для таких задач.Действие: Запустите утилиту клонирования от имени суперпользователя:sudo nand-sata-install
Что произойдет дальше: На экране появится текстовый интерфейс (меню). Вам нужно будет сделать несколько выборов с помощью клавиатуры.Выбор цели: Утилита спросит, куда вы хотите установить систему. Выберите опцию, которая соответствует установке на eMMC. Обычно это что-то вроде Boot from eMMC - system on eMMC.Выбор файловой системы: Вам предложат выбрать файловую систему. Оставьте ext4 — это стандартный и лучший выбор.Подтверждение: Система покажет вам финальное предупреждение о том, что все данные на eMMC будут стёрты. Внимательно проверьте, что в качестве цели (target) указан именно eMMC-накопитель (обычно /dev/mmcblk1 или похожий), а не ваша SD-карта (/dev/mmcblk0). После этого подтвердите операцию.Процесс копирования: Начнется процесс копирования всех файлов с вашей SD-карты на eMMC. Это может занять от 5 до 15 минут в зависимости от скорости ваших носителей. Просто дождитесь его завершения.Шаг 4: Завершение миграцииЭто самый важный шаг.Завершение работы: После того как скрипт сообщит об успешном завершении, выключите ваш Orange Pi правильной командой:sudo poweroff
Отключите питание: Дождитесь, пока все светодиоды на плате погаснут, и отключите кабель питания.ИЗВЛЕКИТЕ SD-КАРТУ! Это обязательно. Если вы оставите SD-карту, Orange Pi может снова загрузиться с неё.Первый запуск с eMMC: Подключите кабель питания обратно. Ваш Orange Pi теперь должен загрузиться с eMMC-памяти.Шаг 5: ПроверкаПосле загрузки проверьте, что всё работает как надо:Подключитесь по SSH. IP-адрес должен остаться прежним.Проверьте статус вашего приложения:pm2 status
Процесс telegram-bot должен быть в статусе online.Проверьте сайт и бота. Убедитесь, что https://bot.smakuie.com открывается и бот отвечает в Telegram.Если всё работает, поздравляю! Вы успешно переехали на быструю и надежную eMMC-память. Теперь можно удалить резервную копию telegram-app-backup.tar.gz./